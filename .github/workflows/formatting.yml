name: formatting

on:
    workflow_call:

jobs:
    check-formatting:
        runs-on: ubuntu-latest
        steps:
            - name: Generate App token
              id: app-token
              uses: actions/create-github-app-token@v1
              with:
                  app-id: ${{ secrets.SUBMODULE_APP_ID }}
                  private-key: ${{ secrets.SUBMODULE_APP_PRIVATE_KEY }}
                  repositories: |
                      IronForgedBot
                      IronForgedBot_Data

            - name: Check out repository
              uses: actions/checkout@v4
              with:
                  token: ${{ steps.app-token.outputs.token }}
                  submodules: recursive

            - uses: psf/black@stable
              with:
                  options: "--check"
                  src: "./"
